#!/bin/sh

set -e

# problem: this loop assumes the host is the last non-hyphen arg... is it always?
# problem: we have to wait for the ssh to complete even if everything is already working

for ARG in $@
do
        if [[ $ARG != -* ]]; then
                URI_WITH_COLON=$ARG
        fi
done

URI=$(echo $URI_WITH_COLON | sed -r s/:[^:]*//g)

# HOSTNAME=$(echo $URI | sed -r s/^[^@]+@//g)

~/bin/ssh $URI "exit 0"

/usr/bin/scp $@
